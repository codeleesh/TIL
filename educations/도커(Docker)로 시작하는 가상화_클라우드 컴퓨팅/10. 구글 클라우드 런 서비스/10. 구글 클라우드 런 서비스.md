# 구글 클라우드 런 서비스

## 서버리스 서비스

### 서버 구축 시 고려 사항

- 대용량 서비스에서의 서버 안정성
- 관리
- 해킹으로부터의 방어
- 서버 애플리케이션 유지보수의 신속성

### 분산 서버 설계

- 프론트엔드 서버 : 비즈니스 로직을 담당하는 서버들의 군집체
- 메모리 데이터 그리드 : 메모리 저장소 역할을 담당하는 서버들의 그물망 군집체
- 데이터베이스 샤드 클러스터 : 거대한 데이터를 나눠 가지는 서버들의 군집체

### 서버리스 아키텍처

- 함수 서비스 : 프론트엔드 서버의 서버리스 버전
- 메모리 캐시 서비스 : 메모리 데이터 그리드의 서버리스 버전
- 데이터베이스 서비스 : 데이터베이스 샤드 클러스터의 서버리스 버전, 서비스형 서버리스

### 대표적인 서버리스 아키텍처 제공업체

- Amazon : Aws Lambda
- Microsoft : Azure Functions
- Google : Google Cloud Functions

### 서버리스의 두 가지 개념

1. 서비스형 서버리스
2. FaaS(Functions as a Service)

### Serviceful Serverless

- 서비스형 서버리스는 직접 서버를 구축하고 프로비저닝하고 관리할 필요없이, 서버의 역할을 서비스 형태로 사용하는 것을 의미
- Amazon Web Service 나 Google Cloud Platform 같은 Public Cloud 는 많은 종류의 서비스를 제공
- 단순히 컴퓨팅 리소스, 스토리지, 네트워크 뿐 아니라 머신 러닝과 모바일 백엔드, 머신 러닝, 블록체인, IoT, 그리고 인공위성 제어 및 데이터베이스와 파일 스토리지, 메시징 서비스도 제공

### FaaS(Functions as a Service)

- FaaS(Fuction as a Service)는 함수를 서비스로 제공하는 형태
- 함수(코드)를 실행하기 위해 서버를 올리고 런타임을 구성하고 코드를 배포해서 실행해야 하는 일련의 과정을 없애고, 사용자가 원하는 로직을 함수로 작성만 해놓으면 (특정 조건 하에) 함수가 실행
- 함수가 호출되면 VM(또는 컨테이너)가 실행되고 해당 런타임 내에서 정의해놓은 함수가 실행
- 실행 후 VM(또는 컨테이너)는 종료
- 서버가 계속 대기하면서 사용자의 요청을 처리하는 것이 아니라, 이벤트가 있을 때마다 실행되는 작은 코드

### FaaS 서비스

- FaaS의 대표주자는 AWS Lambda

### Serverless Application 유형

- 클라이언트에서 사용자 인터랙션 로직을 대부분 처리
- 자주 사용하는 서버 기능을 서버리스형 서비스로 처리
- 각종 연계를 위해 사용하는 작은 함수(Faas)
- 설명 : 클라이언트에서 사용자와 상호작용하는 로직을 대부분을 처리해서 서버의 역할을 줄이고 서버에서 제공하는 기능은 서버리스형 서비스를 적극 활용하고, 각 서비스 간 로직은 FaaS를 이용해 구현

### XaaS 서비스

- Legacy
  - 기존 시스템은 인프라로부터 소프트웨어까지 전부 구축하고 개발 필요
- IaaS
  - 필요한 하드웨어와 가상화, OS 등 인프라 요소를 서비스 형태로 제공하며 원하는 사양의 서버를 VM 으로 생성 가능
- CaaS
  - 서비스 형태로 제공되는 컨테이너를 활용해 애플리케이션을 배포
- PaaS
  - 애플리케이션 개발에 집중할 수 있도록 인프라와 런타임 환경을 제공
- FaaS
  - 실행할 함수 코드에만 집중 가능
- SaaS
  - 제공되는 소프트웨어를 사용하는 형태

## 구글 클라우드 런

### 구글 클라우드 런(Cloud Run) 소개

- 구글 클라우드 넥스트 2019(Google Cloud Next 2019)에서 도커(Docker) 컨테이너를 서버리스 환경에서 운영할 수 있는 클라우드 런 서비스를 발표
- 클라우드 런은 쿠버네티스 위에서 케이네이티브 기반으로 동작
- 도커 이미지만 있다면 외부에 노출된 서버 애플리케이션을 손쉽게 실행하는 것이 가능
- 케이네이티브 기반이기 때문에 구글 클라우드에 종속되지 않고 높은 이식성
- 클라우드 런의 서비스는 기본적으로 서버 리퀘스트를 가정하고 리퀘스트를 받으면 컨테이너가 실행되고 요청을 처리
- Cloud Run은 여러 언어(Go, Node.js, Python, 자바 등)를 지원하므로 원하는 프로그래밍 언어와 프레임워크를 자유롭게 사용
