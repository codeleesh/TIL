# 비 연결성(connectionless)

- HTTP는 기본이 연결을 유지하지 않는 모델입니다.
- 일반적으로 초 단위의 이하의 바른 속도로 응답합니다.
- 1시간 동안 수천명이 서비스를 사용해도 실제 서버에서 동시에 처리하는 요청은 수십개 이하로 매우 작습니다.
  - 예) 웹 브라우저에서 계속 연속해서 검색 버튼을 누르지는 않는다.
- 서버 자원을 매우 효율적으로 사용할 수 있습니다.

## 연결을 유지하는 모델

- TCP/IP 소켓 연결
  - 클라이언트1 서버 연결
    - 요청
    - 응답
    - 유지
  - 클라이언트2와 서버 연결
    - 요청
    - 응답
    - 유지
  - 클라이언트3과 서버 연결
    - 요청
    - 응답
    - 유지
- 서버는 연결을 계속 유지하면서 서버 자원을 소모해야 합니다.

## 연결을 유지하지 않는 모델

- 클라이언트1 서버 연결
  - 요청
  - 응답
  - 연결 종료
- 클라이언트2와 서버 연결
  - 요청
  - 응답
  - 연결 종료
- 클라이언트3과 서버 연결
  - 요청
  - 응답
  - 연결 종료
- 서버는 연결을 계속 유지할 필요가 없으며, 서버 자원을 소모하지 않습니다.
  - 자원을 요청이 올때만 사용할 수 있기 때문에 최소한의 자원으로만 소모할 수 있습니다.

## 한계와 극복

- TCP/IP 연결을 새로 맺어야 합니다.
  - 3 way handshake 시간 추가가 됩니다.
- 웹 브라우저로 사이트를 요청하면 HTML 뿐만 아니라 자바스크립트, css, 추가 이미지 등 수 많은 자원이 함께 다운로드됩니다.
- 지금은 HTTP 지속 연결(Persistent Connections)로 문제 해결을 합니다.
- HTTP/2, HTTP/3에서 더 많은 성능 개선과 최적화가 이루어지고 있습니다.

## 스테이스리스를 기억하자

- 정말 같은 시간에 딱 맞추어 발생하는 대용량 트래픽
- 예) 선착순 이벤트, 명절 KTX 예약, 학과 수업 등록
- 예) 저녁 6:00 선착숙 1000명 치킨 할인 이벤트 -> 수만명 동시 요청
