# 단반향 연관관계

## 목표

- 객체와 테이블 연관관계의 차이를 위해
- 객체의 참조와 테이블의 외래 키를 매핑
- 용어 이해
  - 방향(Direction) : 단방향, 양방향
  - 다중성(Multiplicity) : 다대일(N:1), 일대다(1:N), 일대일(1:1), 다대다(N:M) 이해
  - 연관관계의 주인(Owner) : 객체 양방향 연관관계는 관리 주인이 필요

## 목차

- 연관관계가 필요한 이유
- 단방향 연관관계
- 양방향 연관관계와 연관관계의 주인
- 실전 예제 - 2. 연관관계 매핑 시작

## 연관관계가 필요한 이유

> 객체지향 설계의 목표는 자율적인 객체들의 협력 공동체를 만드는 것이다.

### 예제 시나리오

- 회원과 팀이 있다.
- 회원은 하나의 팀에만 소속될 수 있다.
- 회원과 팀은 다대일 관계다.

### 객체를 테이블에 맞추어 모델링

- 연관관계가 없는 개체
- 참조 대신에 외래 키를 그대로 사용
- 외래 키 식별자를 직접 다룸
- 식별자로 다시 조회, 객체 지향적인 방법은 아니다.

### ansi 표준 join
```sql
select * from member m
join team t on m.team_id = t.team_id;
```

### 객체를 테이블에 맞추어 데이터 중심으로 모델링하면, 협력 관계를 만들 수 없다.

- 테이블은 외래 키로 조인을 사용해서 연관된 테이블을 찾는다.
- 객체는 참조를 사용해서 연관된 객체를 찾는다.
- 테이블과 객체 사이에는 이런 큰 간격이 있다.

## 단방향 연관관계

- 어노테이션은 Database 설정을 위해서 존재한다.

### 객체 지향 모델링
(객체 연관관계 사용)

- `@ManyToOne` 다대일
  - 일인 필드위에 어노테이션 선언
  - `fetch` 전략은 `EAGER` 기본, 선택 가능 `LAZY`
  - `EAGER` 조인된 쿼리가 전송
  - `LAZY` 각각 쿼리가 전송
- `@JoinColumn` 은 객체와 테이블의 FK와 매핑시켜주는 역할
