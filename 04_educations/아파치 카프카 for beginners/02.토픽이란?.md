# 토픽이란?

- 데이터가 들어갈 수 있는 공간
- 카프카에서는 토픽을 여러개 생성 가능
- 데이터베이스의 테이블 또는 파일시스템의 폴더와 유사한 기능
- 이름을 가질 수 있음 -> 유지보수 편리성
  - click_log
  - send_sms
  - location_log

## 파티션이 1개인 경우

- 첫번째 파티션 번호는 0번부터 시작하며 하나의 파티션은 큐와같이 내부에 데이터가 파티션끝에서부터 차속 쌓이게됨
- 클릭로그 토픽에 카프가 컨슈머가 붙게 되면 가장 오래된 순서대로 가져가게됨
- 컨슈머가 데이터들을 가져가도 데이터는 삭제되지 않음
- 새로운 컨슈머가 붙어서 가져갈 수 있음
  - 컨슈머 그룹이 달라야 하고
  - auto.offset.reset=earliest
  - 클릭로그를 분석 및 저장하기위해 ES에 저장하고, 백업하기 위해 hadoop에 저장

## 파티션이 2개인 경우

- 프로듀서가 데이터를 보낼때 키를 지정할 수 있음
- 키를 지정하지 않고 기본 파티셔너설정을 사용한다면 라운드로빈으로 파티션이 지정
- 키가 있고 기본 파티셔너를 사용할 경우 키의 해시값을 구하고 특정 파티션에 할당

## 파티션이 3개인 경우

> 여기선 잠깐!
파티션을 늘리는 것은 아주 조심해야 한다.
파티션을 늘리는 것은 가능하지만 다시 줄일 수는 없다.
왜 파티션을 늘릴까요?
파티션을 늘리면 컨슈머의 개수를 늘려서 데이터 처리를 분산시킬 수 있음

파티션의 데이터는 언제 삭제되는가?
- log.retention.ms : 최대 record 보존 시간
- log.retention.byte : 최대 record 보존 크기(byte)
