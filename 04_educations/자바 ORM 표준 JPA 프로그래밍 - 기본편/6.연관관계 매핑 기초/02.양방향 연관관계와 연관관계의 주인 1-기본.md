# 양방향 연관관계와 연관관계의 주인 1 - 기본

## 양방향 매핑

- 양쪽 참조 가능
- 테이블 연관관계는 단방향 매핑과 차이 없음
- 반대 방향으로 객체 그래프 탐색

> 객체는 가급적 단방향이 좋음

### 연관관계의 주인과 mappedBy

- mappedBy = JPA의 멘탈붕괴 난이도
- mappedBy는 처음에는 이해하기 어렵다
- 객체와 테이블간에 연관관계를 맺는 차이를 이해해야 한다.

### 객체와 테이블이 관계를 맺는 차이

- 객체 연관관계 = 2개
  - 회원 -> 팀 연관관계 1개(단방향)
  - 팀 -> 회원 연관관계 1개(단방향)
  - 실제 단방향 연관관계가 2개인 것을 양방향 연관관계로 말하는 것임
  - 참조가 양쪽에 다 있어야함
- 테이블 연관관계 = 1개
  - 회원 <-> 팀의 연관관계(양방향)
  - 외래키로 PK와 조인을 하면, PK와 외래키를 조인하면 양쪽을 모두 다 알 수 있음

### 객체의 양방향 관계

- 객체의 양방향 관계는 사실 양방향 관계가 아니라 서로 다른 단방향 관계 2개다.
- 객체를 양방향으로 참조하려면 단방향 연관관계를 2개 만들어야 한다.
- A -> B (a.getB())
- B -> A (b.getA())

### 테이블의 양방향 연관관계

- 테이블은 외래 키 하나로 두 테이블의 연관관계를 관리
- MEMBER.TEAM_ID 외래 키 하나로 양방향 연관관계 가짐(양쪽으로 조인할 수 있다.)

### 둘 중 하나로 외래 키를 관리해야 한다.
