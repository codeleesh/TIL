# HTTP 메서드의 속성


출처 : https://ko.wikipedia.org/wiki/HTTP

## 안전(Safe)

- 호출해도 리소스를 변경하지 않습니다.
  - 변경이 일어나지 않습니다.
- Q: 그래도 계속 호출해서, 로그 같은게 쌓여서 장애가 발생하면요?
- A: 안전은 해당 리소스만 고려합니다.

## 멱등(Idempotent)

- f(f(x)) = f(x)
- 한 번 호출하든 두 번 호출하든 100번 호출하든 결과가 똑같습니다.
- 멱등 메서드
  - GET : 한 번 조회하든, 두 번 조회하든 같은 결과가 조회됩니다.
  - PUT : 결과를 대체합니다. 따라서 같은 요청을 여러번 해도 최종 결과는 같습니다.
  - DELETE : 결과를 삭제합니다. 같은 요청을 여러번 해도 삭제된 결과는 똑같습니다.
  - POST : 멱등이 아닙니다. 두 번 호출하면 중복해서 발샐할 수 있습니다.

- 활용
  - 자동 복구 메커니즘
  - 서버가 TIMEOUT 등으로 정상 으답을 못주었을 떄, 클라이언트가 같은 요청을 다시 해도 되는가? 판단 근거

- Q: 재요청 중간에 다른 곳에서 리소스를 변경해버리면 어떻게 될까요?
  - 사용자1 : GET -> username:A, age:20
  - 사용자2 : PUT -> username:A, age:30
  - 사용자1 : GET -> username:A, age:30 -> 사용자2의 영향으로 바뀐 데이터 조회
- A: 멱등은 외부 요인으로 중간에 리소스가 변경되는 것 까지는 고려하지는 않습니다.

## 캐시 가능 (중요성)

ex) 웹 브라우저에 이미지가 큰 것을 요청한다고 할 때, 다음에 요청을 보낼 때 큰 리소스를 똑같이 요청할 필요는 없다고 생각합니다. 그래서 이 이미지를 웹 브라우저가 내 로컬 pc에 저장를 하고 있는 것을 캐시라고 합니다.

- 응답 결과 리소스를 캐시해서 사용해도 될까요?
- GET, HEAD, POST, PATCH 캐시가능
- 실제로는 GET, HEAD 정보만 캐시로 사용
  - POST, PATCH는 본문 내용까지 캐시 키로 고려해야 하는데, 구현이 쉽지 않습니다.
    - 요청 body까지 캐시 키로 설정하기가 어렵기 때문입니다.
