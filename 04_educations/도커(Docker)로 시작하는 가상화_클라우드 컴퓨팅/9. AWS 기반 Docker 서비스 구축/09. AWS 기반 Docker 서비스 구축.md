# AWS 기반 Docker 서비스 구축

## AWS Docker 서비스 개요

- Docker는 애플리케이션을 신속하게 구축, 테스트 및 배포할 수 있는 소프트웨어 플랫폼
- Docker는 소프트웨어를 컨테이너라는 표준화된 유닛으로 패키징하며, 이 컨테이너에는 라이브러리, 시스템 도구, 코드, 런타임 등 소프트웨어를 실행하는 데 필요한 모든 것이 포함
- Docker를 사용하면 환경에 구애 받지 않고 애플리케이션을 신속하게 배포 및 확안할 수 있으며 코드가 문제없이 실행될 것임을 확신
- AWS에서 Docker를 실행하면 개발자와 관리자가 어떠한 규모에서 든 매우 안정적이며 저렴한 방식으로 애플리케이션을 구축, 제공 및 실행 가능
- AWS에서는 두 가지 Docker 라이선싱 모델, 즉 오픈 소스 Docker Community Edition(CE)과 구독 기반의 Docker Enterprise Edition(EE) 둘다 지원

### Docker 작동 방식

- Docker는 코드를 실행하는 표준 방식을 제공
- Docker는 컨테이너를 위한 운영 체제
- 가상머신이 서버 하드웨어를 가상화하는 방식과 비슷하게(직접 관리해야 하는 필요성 제거) 컨테이너를 서버 운영 체제를 가상화
- Docker는 각 서버에 설치되며 컨테이너를 구축, 시작 또는 중단하는데 사용할 수 있는 간단한 명령을 제공
- AWS Fargate, Amazon ECS, Amazon EKS 및 AWS Batch와 같은 AWS 서비스를 사용하면 Docker 컨테이너를 대규모로 실행하고 관리 가능

### Docker를 사용해야 하는 이유

- Docker를 사용하면 코드를 더 빨리 전달하고, 애플리케이션 운영을 표준화하고, 코드를 원활하게 이동하고, 리소스 사용률을 높여 비용을 절감
- Docker를 사용하면 어디서나 안정적으로 실행할 수 있는 단일 객체를 확보
- Docker의 간단한 구문을 사용해 완벽하게 제어
- 더 많은 소프트웨어를 더 빨리 제공
- 운영 표준화
  - 작은 컨테이너식 애플리케이션을 사용하면 손쉽게 배포하고, 문제를 파악하고, 수정을 위해 롤백
- 원활하게 이전
  - Docker 기반 애플리케이션을 로컬 개발 시스템에서 AWS의 프로덕션 배포로 원활하게 이전
- Docker 컨테이너를 최신 애플리케이션 및 플랫폼을 생성하는 핵심 빌딩 블록으로 사용
- Docker에서는 손쉽게 분산 마이크로 서비스 아키텍처를 구축 및 실행
- 표준화된 지속적 통합 및 지속적 전달 파이프라인을 통해 코드를 배포
- 고도로 확장 가능한 데이터 처리 시스템을 구축
- 개발자를 위한 완전 관리형 플랫폼을 생성 가능
- 서비스로서의 컨테이너
  - 안전한 IT 관리형 인프라와 콘텐츠로 분산 애플리케이션을 구축 및 제공

### AWS에서 Docker 실행

- AWS는 Docker 오픈 소스 및 상용 솔루션 모두에 대한 지원을 제공
- Amazon Elastic Container Service(ECS)는 고도로 확장 가능하고 성능이 뛰어난 컨테이너 관리 서비스
- AWS Fargate는 인프라를 배포하거나 서버를 프로비저닝하거나 관리하지 않고도 프로덕션에서 컨테이너를 실행할 수 있도록 지원하는 Amazon ECS를 위한 기술
- Amazon Elastic Container Service for Kubernetes(EKS)를 사용하면 손쉽게 AWS에서 Kubernetes를 실행
- Amazon Elastic Container Registry(ECR)는 Docker 컨테이너 이미지를 손쉽게 저장하고 관리할 수 있도록 지원하는 안전한 고가용성 프라이빗 컨테이너 레지스트리로서, 빠르게 가져오고 보호하기 위해 저장 이미지를 암호화하고 압축
- AWS Batch를 사용하면 Docker 컨테이너를 사용하여 고도로 확장 가능한 배치 처리 워크로드를 실행

### Docker 컨테이너 배포

- Amazon Elastic Container Service(ECS)는 확장 가능한 클러스터에서 Docker 애플리케이션을 실행하는데 사용하는 Amazon Web Services

- Amazon ECS 첫 실행을 설정
  - Amazon ECS 첫 실행 마법사는 클러스터를 생성하고 샘플 웹 애플리케이션을 시작하는 방법을 안내

- 작업 정의 생성
  - 작업 정의는 애플리케이션에 대한 청사진
  - 이 단계에서 Amazon ECS가 컨테이너에 어떤 Docker 이미지를 사용하고, 작업에 몇 개의 컨테이너를 사용하며, 각 컨테이너에 대한 리소스 할당을 어떻게 되는지알 수 있도록 작업 정의를 지정

- 서비스 구성
  - 작업 정의를 생성하였으니 이제 Amazon ECS 서비스를 구성
  - 서비스는 클러스터에서 작업 정의 사본을 시작 및 유지 관리
  - 예를 들어 애플리케이션을 서비스로 실행하면 Amazon ECS에서 중단된 작업을 복구하고 지정한 사본 수를 유지 관리

- 클러스터 구성
  - Amazon ECS 작업을 Amazon ECS 컨테이너 에이전트를 실행하는 컨테이너 인스턴스 집합인 클러스터에서 실행
  - 이 단계에서는 클러스터를 구성하고, 보안 설정을 검토하며, IAM 역할을 설정

- 리소스 시작 및 확인
  - 이전 단계에서 작업 정의(애플리케이션 청사진과 비슷), Amazon ECS 서비스(작업 정의 사본을 시작 및 유지 관리) 및 클러스터(컨테이너 에이전트를 실행하는 컨테이너 인스턴스 집합)를 구성
  - 이 단계에서는 생성한 리소스를 검토, 시작 및 확인

- 샘플 애플리케이션 열기
  - 이 단계에서는 브라우저가 로든 밸런서 DNS 이름을 가리키도록 하여 샘플 애플리케이션이 실행되고 있는지 확인

## 요약

- AWS에서 Docker를 실행하면 개발자와 관리자가 어떠한 규모에서든 매우 안정적이며 저렴한 방식으로 애플리케이션을 구축, 제공 및 실행 가능하다.
